<div class="order-management container-fluid py-4">
  <div class="card">
    <div class="card-header bg-white border-bottom-0 py-3">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="mb-0">Order Management</h2>
        <button class="btn btn-primary" (click)="fetchOrders()" [disabled]="loading">
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-1"></span>
          Refresh Orders
        </button>
      </div>
    </div>

    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>Order #</th>
              <th>Customer</th>
              <th>Date</th>
              <th>Status</th>
              <th>Items</th>
              <th>Total</th>
              <!-- <th>Actions</th> -->
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="loading">
              <td colspan="7" class="text-center py-4">
                <div class="spinner-border text-primary" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
              </td>
            </tr>
            <tr *ngFor="let order of orders" class="order-row">
              <td class="fw-semibold">{{ order.orderNumber }}</td>
              <td>
                <div class="d-flex align-items-center">
                  <div class="avatar avatar-sm bg-light rounded-circle me-2">
                    <span class="text-primary">{{ order.customer.firstName.charAt(0) }}{{ order.customer.lastName.charAt(0) }}</span>
                  </div>
                  <div>
                    <div class="fw-medium">{{ order.customer.firstName }} {{ order.customer.lastName }}</div>
                    <small class="text-muted">ID: {{ order.customer.customerId }}</small>
                  </div>
                </div>
              </td>
              <td>{{ order.orderDate | date: 'MMM d, y h:mm a' }}</td>
              <td>
                <select class="form-select form-select-sm status-select" 
                        [(ngModel)]="order.status" 
                        (change)="updateOrderStatus(order, order.status)"
                        [ngClass]="getStatusClass(order.status)">
                  <option *ngFor="let option of statusOptions" 
                          [value]="option.value"
                          [selected]="order.status === option.value">
                    {{ option.label }}
                  </option>
                </select>
              </td>
              <td>{{ order.orderItems?.length || 0 }}</td>
              <td class="fw-bold">{{ order.totalAmount | currency:'INR':'symbol':'1.2-2' }}</td>
              <td>
              
              </td>
            </tr>
            <tr *ngIf="!loading && orders.length === 0">
              <td colspan="7" class="text-center py-4 text-muted">
                No orders found
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>