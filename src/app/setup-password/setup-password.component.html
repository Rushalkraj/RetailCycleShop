<div class="setup-password-container">
  <div class="setup-password-wrapper">
    <div class="setup-password-content">
      <div class="brand-section">
        <div class="logo">
          <i class="pi pi-lock"></i>
        </div>
        <h1>Setup Your Password</h1>
        <p>Create a strong password to secure your account</p>
      </div>

      <form [formGroup]="setupPasswordForm" (ngSubmit)="onSubmit()" class="setup-password-form">
        <div class="form-group">
          <label for="password">New Password</label>
          <div class="p-inputgroup">
            <input
              [type]="showPassword ? 'text' : 'password'"
              id="password"
              formControlName="password"
              pInputText
              placeholder="Enter your new password"
              [ngClass]="{'ng-invalid': setupPasswordForm.get('password')?.invalid && setupPasswordForm.get('password')?.touched}"
            />
            <button type="button" class="p-button-text" (click)="togglePassword()">
              <i class="pi" [ngClass]="showPassword ? 'pi-eye-slash' : 'pi-eye'"></i>
            </button>
          </div>
          <div class="password-requirements">
            <div class="requirement" [ngClass]="{'valid': hasUpperCase}">
              <i class="pi" [ngClass]="hasUpperCase ? 'pi-check-circle' : 'pi-circle'"></i>
              <span>At least one uppercase letter</span>
            </div>
            <div class="requirement" [ngClass]="{'valid': hasLowerCase}">
              <i class="pi" [ngClass]="hasLowerCase ? 'pi-check-circle' : 'pi-circle'"></i>
              <span>At least one lowercase letter</span>
            </div>
            <div class="requirement" [ngClass]="{'valid': hasNumber}">
              <i class="pi" [ngClass]="hasNumber ? 'pi-check-circle' : 'pi-circle'"></i>
              <span>At least one number</span>
            </div>
            <div class="requirement" [ngClass]="{'valid': hasSpecialChar}">
              <i class="pi" [ngClass]="hasSpecialChar ? 'pi-check-circle' : 'pi-circle'"></i>
              <span>At least one special character</span>
            </div>
            <div class="requirement" [ngClass]="{'valid': setupPasswordForm.get('password')?.value?.length >= 8}">
              <i class="pi" [ngClass]="setupPasswordForm.get('password')?.value?.length >= 8 ? 'pi-check-circle' : 'pi-circle'"></i>
              <span>At least 8 characters long</span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <div class="p-inputgroup">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword"
              formControlName="confirmPassword"
              pInputText
              placeholder="Confirm your new password"
              [ngClass]="{'ng-invalid': setupPasswordForm.get('confirmPassword')?.invalid && setupPasswordForm.get('confirmPassword')?.touched}"
            />
            <button type="button" class="p-button-text" (click)="toggleConfirmPassword()">
              <i class="pi" [ngClass]="showConfirmPassword ? 'pi-eye-slash' : 'pi-eye'"></i>
            </button>
          </div>
          <small class="p-error" *ngIf="setupPasswordForm.get('confirmPassword')?.touched && setupPasswordForm.hasError('passwordMismatch')">
            Passwords do not match
          </small>
        </div>

        <button
          pButton
          type="submit"
          label="Set Password"
          [loading]="isLoading"
          [disabled]="!setupPasswordForm.valid"
          class="submit-button"
        ></button>
      </form>
    </div>

    <div class="setup-password-image">
      <div class="feature-cards">
        <div class="feature-card">
          <i class="pi pi-shield"></i>
          <h3>Secure Account</h3>
          <p>Your account security is our top priority</p>
        </div>
        <div class="feature-card">
          <i class="pi pi-key"></i>
          <h3>Strong Password</h3>
          <p>Create a password that's hard to guess</p>
        </div>
        <div class="feature-card">
          <i class="pi pi-lock"></i>
          <h3>Data Protection</h3>
          <p>Your personal information is always protected</p>
        </div>
      </div>
    </div>
  </div>
</div>

<p-toast></p-toast>